<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>å¤©æ°£é å ± (36 å°æ™‚)</title>
    <style>
      /* å®‡å®™é¢¨èƒŒæ™¯ */
      body {
        margin: 0;
        font-family: "Noto Sans TC", sans-serif;
        background: radial-gradient(circle at center, #0d1b2a, #000000);
        color: #ffffff;
        min-height: 100vh;
        background-image: url("https://www.transparenttextures.com/patterns/stardust.png");
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        text-align: center;
      }

      h1 {
        font-size: 2em;
        margin-bottom: 20px;
        text-shadow: 0 0 10px #00e1ff;
      }

      .weather-item {
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 12px;
        padding: 15px;
        margin: 15px 0;
        background: rgba(255, 255, 255, 0.05);
        box-shadow: 0 0 15px rgba(0, 200, 255, 0.3);
        text-align: left;
      }

      .weather-item h3 {
        margin: 0 0 10px 0;
        color: #00e1ff;
      }

      .btn-container {
        margin-top: 20px;
      }

      .btn {
        display: inline-block;
        margin: 5px;
        padding: 10px 20px;
        background: #00e1ff;
        color: #000;
        text-decoration: none;
        border-radius: 8px;
        transition: 0.3s;
      }

      .btn:hover {
        background: #009ecf;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>æœªä¾† 36 å°æ™‚å„å€å¤©æ°£é å ±</h1>
      <div id="weatherList">è¼‰å…¥ä¸­â€¦</div>
      <div class="btn-container">
        <a class="btn" href="javascript:history.back()">ä¸Šä¸€é </a>
        <a class="btn" href="index.html">å›é¦–é </a>
      </div>
    </div>

    <script>
      const apiUrl =
        "https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=CWB-FE4AD205-4642-40AD-B7FD-336A53D1ED2A";
      const weatherList = document.getElementById("weatherList");

      async function loadWeather() {
        try {
          const resp = await fetch(apiUrl);
          if (!resp.ok) throw new Error(`HTTP éŒ¯èª¤ï¼š${resp.status}`);
          const data = await resp.json();
          const locations = data.records.location;
          if (!locations || !locations.length) {
            weatherList.textContent = "æœªå–å¾—ä»»ä½•å¤©æ°£è³‡æ–™";
            return;
          }

          weatherList.innerHTML = "";

          locations.forEach((loc) => {
            const item = document.createElement("div");
            item.className = "weather-item";

            const area = document.createElement("h3");
            area.textContent = loc.locationName;
            item.appendChild(area);

            // å–ç¬¬ä¸€å€‹ time ç¯€é»
            function getParam(name) {
              const e = loc.weatherElement.find(
                (el) => el.elementName === name
              );
              return e && e.time && e.time[0]
                ? e.time[0].parameter.parameterName
                : "â€”";
            }

            const wx = getParam("Wx");
            const maxT = getParam("MaxT");
            const minT = getParam("MinT");
            const ci = getParam("CI");
            const pop = getParam("PoP");

            const info = document.createElement("p");
            info.innerHTML = `
              ğŸŒ¤ï¸ å¤©æ°£ï¼š${wx}<br>
              ğŸŒ¡ï¸ æº«åº¦ï¼š${minT}Â°C ~ ${maxT}Â°C<br>
              ğŸ˜Œ èˆ’é©åº¦ï¼š${ci}<br>
              â˜” é™é›¨æ©Ÿç‡ï¼š${pop}%
            `;
            item.appendChild(info);

            weatherList.appendChild(item);
          });
        } catch (err) {
          weatherList.textContent = "è¼‰å…¥å¤±æ•—ï¼š" + err.message;
        }
      }

      loadWeather();
    </script>
  </body>
</html>
